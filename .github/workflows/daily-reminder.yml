name: Daily Study Reminder
on:
  schedule:
    # Run every day at 9 AM UTC (adjust timezone as needed)
    - cron: '0 9 * * *'
  workflow_dispatch:

permissions:
  issues: write
  contents: read

jobs:
  create-daily-reminder:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Create daily study reminder issue
        uses: actions/github-script@v6
        with:
          script: |
            const today = new Date();
            const dayOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][today.getDay()];
            const dateStr = today.toISOString().split('T')[0];
            
            // Calculate week number
            const startDate = new Date('2026-01-09');
            const diffTime = Math.abs(today - startDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const weekNumber = Math.floor(diffDays / 7) + 1;
            
            const title = "Daily Study Reminder: " + dateStr + " (" + dayOfWeek + ")";
            
            const body = "## Today's Focus\n\nTime to hit your AWS learning goals for today!\n\n**Current Week:** Week " + weekNumber + "\n**Day:** " + dayOfWeek + "\n**Date:** " + dateStr + "\n\n### What to Do:\n1. Open the detailed learning plan: [AWS_Learning_Path.md](https://github.com/UtsavSaha/workspace/blob/main/AWS_Learning_Path.md)\n2. Find today's topics in Week " + weekNumber + "\n3. Create a daily study issue if you haven't already\n4. Follow the study plan for 30-60 minutes\n5. Log your progress in the issue\n\n### Time Commitment\n- **Weekday:** 30-60 minutes\n- **Weekend:** 2 hours\n\n### Quick Links\n- [Weekly Milestones](https://github.com/UtsavSaha/workspace/milestones)\n- [All Issues](https://github.com/UtsavSaha/workspace/issues)\n- [Learning Path Details](https://github.com/UtsavSaha/workspace/blob/main/AWS_Learning_Path.md)\n\n---\nRemember: Consistency is key to success! Every day brings you closer to your certification.";
            
            github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: title,
              body: body,
              labels: ['reminder', 'daily-task'],
            });
