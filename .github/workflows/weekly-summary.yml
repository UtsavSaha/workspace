name: Weekly Summary
on:
  schedule:
    # Run every Sunday at 6 PM UTC
    - cron: '0 18 * * 0'
  workflow_dispatch:

jobs:
  weekly-summary:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Create weekly summary reminder
        uses: actions/github-script@v6
        with:
          script: |
            const today = new Date();
            const startDate = new Date('2026-01-09');
            const diffTime = Math.abs(today - startDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const weekNumber = Math.floor(diffDays / 7) + 1;
            
            const title = `ðŸ“Š Weekly Summary & Review - Week ${weekNumber}`;
            
            const body = '## ðŸŽ¯ End of Week ' + weekNumber + ' - Time for Review!\n\n' +
            'Hey! Another week of AWS learning is in the books. Let\'s take some time to reflect and prepare for the next week.\n\n' +
            '### ðŸ“‹ End of Week Checklist:\n' +
            '- [ ] Completed all daily study sessions for this week\n' +
            '- [ ] Finished all hands-on labs for this week\n' +
            '- [ ] Took the weekly practice quiz\n' +
            '- [ ] Reviewed incorrect answers\n' +
            '- [ ] Updated your notes with key concepts\n' +
            '- [ ] Identified weak areas for future review\n\n' +
            '### ðŸ“Š Performance Review:\n' +
            '- **Quiz Score This Week:** ______ / _____\n' +
            '- **Estimated Confidence Level:** [ ] Low [ ] Medium [ ] High\n' +
            '- **Topics That Need Review:** [List here]\n\n' +
            '### ðŸ”„ Next Week Prep:\n' +
            '- Review the next week\'s topics in the learning plan\n' +
            '- Ensure you have access to necessary AWS services\n' +
            '- Set reminders for the week\'s study sessions\n\n' +
            '### ðŸ’¡ Reflection:\n' +
            'Take a moment to write about:\n' +
            '1. What went well this week?\n' +
            '2. What challenges did you face?\n' +
            '3. What will you do differently next week?\n\n' +
            '### ðŸ”— Quick Links:\n' +
            '- [View This Week\'s Learning Plan](https://github.com/UtsavSaha/workspace/blob/main/AWS_Learning_Path.md)\n' +
            '- [Check Your Issues & Progress](https://github.com/UtsavSaha/workspace/issues)\n' +
            '- [View Your Practice Exam Scores](https://github.com/UtsavSaha/workspace/tree/main/practice-exams)\n\n' +
            '---\n' +
            '**Keep up the great work!** ðŸŒŸ You\'re making progress towards your AWS certification!';
            
            github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: title,
              body: body,
              labels: ['reminder', 'weekly-review'],
            });
